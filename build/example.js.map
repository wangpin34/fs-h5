{"version":3,"sources":["webpack:///webpack/bootstrap 781ce70271e19ed6d7fa","webpack:///./example/example.js","webpack:///./src/fs.js","webpack:///./src/ErrorHandler.js"],"names":[],"mappings":"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","file":"example.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 781ce70271e19ed6d7fa\n **/","import fs from '../src/fs'\r\n\r\nwindow.onload = function(){\r\n\r\n\tfs.init(10*10*1024,function(){\r\n\r\n\t\tfs.existsFile('a.td',function(err,exists){console.log(exists)})\r\n\r\n\t\tfs.mkdir('/docs/files/', function(err, dirEntry){\r\n\t\t\t\r\n\t\t\tconsole.log('/docs/files/ created successfully');\r\n\r\n\t\t\tfs.rmdir('/docs', {recursive: true}, function(){\r\n\t\t\t\tconsole.log('/docs/ removed successfully');\r\n\t\t\t})\r\n\t\t})\r\n\r\n\r\n\t\tvar list = function(){\r\n\t\t\tfs.list('/', function(err, entries){\r\n\t\t\t\tvar files = entries.filter(function(entry){\r\n\t\t\t\t\treturn entry.isFile;\r\n\t\t\t\t})\r\n\r\n\t\t\t\tvar articles = document.getElementById('articles');\r\n\t\t\t\tarticles.innerHTML = ''; // Remove children\r\n\r\n\t\t\t\tvar content = files.map(function(file){\r\n\t\t\t\t\tvar name = file.name;\r\n\t\t\t\t\treturn '<li>'+ name +'</li>';\r\n\t\t\t\t}).join('')\r\n\r\n\t\t\t\tarticles.innerHTML = content;\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tlist();\r\n\r\n\t\tvar saveBtn = document.getElementById('saveBtn');\r\n\r\n\t\tsaveBtn.addEventListener('click', function(event){\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tvar title = document.getElementById('title').value,\r\n\t\t\t\ttext = document.getElementById('content').value;\r\n\t\t\t\r\n\t\t\tif(!title || !text) {\r\n\t\t\t\talert('Please enter note title or content');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfs.writeFile(title, text, function(err){\r\n\t\t\t\talert('save ' + title + ' successfully');\r\n\t\t\t\tlist();\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tvar clearBtn = document.getElementById('clearBtn');\r\n\r\n\t\tclearBtn.addEventListener('click', function(event){\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tevent.preventDefault();\r\n\t\t\tdocument.getElementById('title').value = '';\r\n\t\t\tdocument.getElementById('content').value = '';\r\n\t\t})\r\n\r\n\t})\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./example/example.js\n **/","import ErrorHandler from './ErrorHandler'\r\n\r\nconst DEFAULT_SIZE = 10 * 1024 * 1024\r\nlet FS = null\r\nlet initialized = false\r\nlet initializing = false\r\n\r\nexport default class fs {\r\n\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tstatic isInitialized() {\r\n\t\treturn initialized\r\n\t}\r\n\r\n\tstatic init(bytes=DEFAULT_SIZE, callback=()=>{}) {\r\n\t\tif(initializing) return; //Make sure only one init is executing\r\n\t\tinitializing = true;\r\n\t\tinitialized = false;\r\n\t\tnavigator.webkitPersistentStorage.requestQuota(bytes, grantBytes => {\r\n\r\n\t\t\t(window.requestFileSystem || window.webkitRequestFileSystem)\r\n\t\t\t(window.PERSISTENT, grantBytes, h5fs => {\r\n\t\t\t\tFS = h5fs;\r\n\t\t\t\tinitializing = false;\r\n\t\t\t\tinitialized = true;\r\n\t\t\t\tcallback(null, h5fs)\r\n\t\t\t}, ErrorHandler.generate('init file system', callback))\r\n\r\n\t\t})\r\n\t}\r\n\r\n\tstatic existsDir(path, callback=()=>{}) {\r\n\r\n\t\tlet handler = (err, callback) => {\r\n\t\t\tif(err.code === FileError.NOT_FOUND_ERR){\r\n\t\t\t\tcallback(null, false)\t\r\n\t\t\t} else {\r\n\t\t\t\tErrorHandler.generate('Make dir ' + path, callback)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tFS.root.getDirectory(path, {}, direntry => {\r\n\t\t\tcallback(null, true)\r\n\t\t}, err => {handler(err, callback)})\r\n\t}\r\n\r\n\tstatic existsFile(path, callback=()=>{}) {\r\n\t\tlet handler = (err, callback) => {\r\n\t\t\tif(err.code === FileError.NOT_FOUND_ERR){\r\n\t\t\t\tcallback(null, false)\t\r\n\t\t\t} else {\r\n\t\t\t\tErrorHandler.generate('Make dir ' + path, callback)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tFS.root.getFile(path, {}, direntry => {\r\n\t\t\tcallback(null, true)\r\n\t\t}, err => {handler(err, callback)})\r\n\t}\r\n\r\n\tstatic mkdir(path, callback=()=>{}) {\r\n\t\t\t\r\n\t\tlet folders = path.split('/').filter(e => {\r\n\t\t\treturn e !== '' && e !== '.'\r\n\t\t})\r\n\t\tlet createDir = (folders, dir) => {  \r\n\r\n\t\t    let parent = dir || FS.root\r\n\r\n\t\t\t  // Throw out './' or '/' and move on to prevent something like '/foo/.//bar'.  \r\n\t\t\t  if (folders[0] == '.' || folders[0] == '') {  \r\n\t\t\t    folders = folders.slice(1)\r\n\t\t\t  }\r\n\r\n\t\t\t  parent.getDirectory(folders[0], {create: true}, dirEntry=>{  \r\n\t\t\t    // Recursively add the new subfolder (if we still have another to create).  \r\n\t\t\t    if (folders.length > 1) {  \r\n\t\t\t      \tcreateDir(folders.slice(1), dirEntry)  \r\n\t\t\t    } else{\r\n\t\t    \t\tcallback(null, dirEntry)\r\n\t\t\t    }\r\n\t\t\t  }, ErrorHandler.generate('Make dir ' + path, callback)) \r\n\t\t};  \r\n\r\n\t\tcreateDir(folders);\t\r\n\t\t\r\n\t}\r\n\r\n\tstatic rmdir (path, option, callback=()=>{}) {\r\n\t\t\tFS.root.getDirectory(path, {}, dirEntry => {\r\n\t\t\t\tif(option.recursive){\r\n\t\t\t\t\tdirEntry.removeRecursively(() => {\r\n\t\t\t\t\t\tcallback(null);\r\n\t\t\t\t\t}, ErrorHandler.generate('Remove dir ' + path, callback))\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdirEntry.remove(() => {\r\n\t\t\t\t\t\tcallback(null);\r\n\t\t\t\t\t}, ErrorHandler.generate('Remove dir ' + path, callback))\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\tstatic writeFile(path, data, callback=()=>{}) {\r\n\t\tFS.root.getFile(path, {create: true}, fileEntry => {\r\n\t\t\tfileEntry.createWriter(fileWriter => {\r\n\t\t\t\tlet bb = new Blob([data],{type:'text/plain'});\r\n\t\t  \t\tfileWriter.write(bb);\r\n\r\n\t\t  \t\tfileWriter.length>data.length && setTimeout(() => {\r\n\t\t  \t\t\t//Truncate file if current content size less than previous\r\n\t\t  \t\t\tfileWriter.truncate(data.length);\r\n\t\t  \t\t},10)\r\n\r\n\t\t  \t\tcallback(null);\r\n\r\n\t\t\t}, ErrorHandler.generate('Write to file ' + path, callback))\r\n\t\t}, ErrorHandler.generate('Search file ' + path, callback))\r\n\t}\r\n\r\n\tstatic readFile(path, callback) {\r\n\t\tFS.root.getFile(path, {create: false}, fileEntry => {\r\n\t\t\tfileEntry.file(file => {\r\n\t\t\t\tlet fr = new FileReader()  \r\n\t\t       \tfr.onloadend = e => {  \r\n\t\t         \tcallback(null, this.result)\r\n\t\t       \t}\r\n\t\t       \tfr.readAsText(file)\r\n\t\t\t}, ErrorHandler.generate('Read file ' + path, callback))\r\n\t\t}, ErrorHandler.generate('Search file ' + path, callback))\r\n\t}\r\n\r\n\tstatic rmFile(path, callback=()=>{}) {\r\n\t\tFS.root.getFile(path, {create: false}, fileEntry => {\r\n\t\t\tfileEntry.remove(() => {  \r\n\t\t      console.log('File removed.')\r\n\t\t      callback(null)\r\n\t\t    }, ErrorHandler.generate('Remove file ' + path, callback)); \r\n\t\t}, ErrorHandler.generate('Search file ' + path, callback))\r\n\t}\r\n\r\n\tstatic list(path, callback=()=>{}) {\r\n\t\tFS.root.getDirectory(path, {}, dirEntry => {\r\n\t\t\tlet dirReader = dirEntry.createReader()\r\n\t\t\tlet entries = []\r\n\t\t\tlet readEntries = () => {\r\n\t\t\t\tdirReader.readEntries( results => {\r\n\t\t\t\t\tif(!results.length){\r\n\t\t\t\t\t\tcallback(null, entries)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tentries = entries.concat(results)\r\n\t\t\t\t\t\treadEntries()\r\n\t\t\t\t\t}\r\n\t\t\t\t},ErrorHandler.generate('List entries in directory' + path, callback))\r\n\t\t\t}\r\n\t\t\r\n\t\t\treadEntries()\r\n\t\t})\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/fs.js\n **/","export default class ErrorHandler {\r\n\r\n\tstatic generate( prefix = 'Error', callback = err =>{} ) {\r\n\t\treturn e => {\r\n\t\t\tlet msg = ''\r\n\t  \r\n\t\t\t  switch (e.code) {  \r\n\t\t\t    case FileError.QUOTA_EXCEEDED_ERR:  \r\n\t\t\t      msg = 'QUOTA_EXCEEDED_ERR'\r\n\t\t\t      break\r\n\t\t\t    case FileError.NOT_FOUND_ERR:  \r\n\t\t\t      msg = 'NOT_FOUND_ERR'\r\n\t\t\t      break\r\n\t\t\t    case FileError.SECURITY_ERR:  \r\n\t\t\t      msg = 'SECURITY_ERR'\r\n\t\t\t      break\r\n\t\t\t    case FileError.INVALID_MODIFICATION_ERR:  \r\n\t\t\t      msg = 'INVALID_MODIFICATION_ERR'\r\n\t\t\t      break\r\n\t\t\t    case FileError.INVALID_STATE_ERR:  \r\n\t\t\t      msg = 'INVALID_STATE_ERR'\r\n\t\t\t      break \r\n\t\t\t    default:\r\n\t\t\t      msg = 'Unknown Error'\r\n\t\t\t      break \r\n\t\t\t  }\r\n\t\t\t  this.logger(prefix + ' / ' + msg, 'error')\r\n\t\t\t  callback(new Error(msg))\r\n\t\t}\r\n\t}\r\n\r\n\tstatic logger(msg = '', type = '') {\r\n\t\tswitch(type){\r\n\t\t\tcase 'info': console.info(msg); break\r\n\t\t\tcase 'warn': console.warn(msg); break\r\n\t\t\tcase 'error': console.error(msg); break\r\n\t\t\tdefault: console.log(msg)\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/ErrorHandler.js\n **/"],"sourceRoot":""}